{% extends "base.html" %}

{% block title %}Belge Yükle - Dokumanet{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">Yeni Belge Yükle</h1>
        <p class="text-gray-600">Belgenizi sisteme yükleyin ve onay sürecini başlatın</p>
    </div>

    <div class="bg-white rounded-lg shadow-sm border p-8">
        <form method="POST" enctype="multipart/form-data" class="space-y-6">
            <!-- Title -->
            <div>
                <label for="title" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-heading mr-1"></i> Belge Başlığı *
                </label>
                <input type="text" 
                       id="title" 
                       name="title" 
                       required 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pk-green focus:border-transparent"
                       placeholder="Belgeniz için açıklayıcı bir başlık girin">
            </div>

            <!-- Description -->
            <div>
                <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-align-left mr-1"></i> Açıklama
                </label>
                <textarea id="description" 
                          name="description" 
                          rows="4"
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pk-green focus:border-transparent"
                          placeholder="Belgeniz hakkında detaylı bilgi verin (isteğe bağlı)"></textarea>
            </div>

            <!-- Category -->
            <div>
                <label for="category" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-tag mr-1"></i> Kategori
                </label>
                <select id="category" 
                        name="category" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pk-green focus:border-transparent">
                    <option value="">Kategori seçin</option>
                    <option value="Sözleşme">Sözleşme</option>
                    <option value="Fatura">Fatura</option>
                    <option value="Rapor">Rapor</option>
                    <option value="Sunum">Sunum</option>
                    <option value="Belge">Genel Belge</option>
                    <option value="Resim">Resim/Fotoğraf</option>
                    <option value="Video">Video</option>
                    <option value="Diğer">Diğer</option>
                </select>
            </div>

            <!-- File Upload -->
            <div>
                <label for="file" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-cloud-upload-alt mr-1"></i> Dosya Seç *
                </label>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-pk-green transition-colors">
                    <input type="file" 
                           id="file" 
                           name="file" 
                           required 
                           accept=".pdf,.jpg,.jpeg,.png,.mp4,.docx,.xlsx,.txt"
                           class="hidden"
                           onchange="updateFileName(this)">
                    <label for="file" class="cursor-pointer">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <div class="text-lg font-medium text-gray-900 mb-2">Dosya yüklemek için tıklayın</div>
                        <div class="text-sm text-gray-500" id="file-info">
                            veya dosyayı buraya sürükleyin
                        </div>
                    </label>
                </div>
                
                <!-- File Info -->
                <div class="mt-4 text-sm text-gray-600">
                    <p><strong>Desteklenen formatlar:</strong> PDF, JPG, PNG, MP4, DOCX, XLSX, TXT</p>
                    <p><strong>Maksimum dosya boyutu:</strong> 50 MB</p>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="flex justify-between items-center pt-6 border-t">
                <a href="{{ url_for('department_dashboard') }}" 
                   class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i> Geri Dön
                </a>
                
                <button type="submit" 
                        class="px-6 py-2 bg-pk-green text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pk-green transition-colors">
                    <i class="fas fa-upload mr-2"></i> Belgeyi Yükle
                </button>
            </div>
        </form>
    </div>

    <!-- Help Section -->
    <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
        <h3 class="text-lg font-medium text-blue-900 mb-4">
            <i class="fas fa-info-circle mr-2"></i> Yükleme Hakkında
        </h3>
        <div class="text-sm text-blue-800 space-y-2">
            <p>• Yüklediğiniz belgeler önce yönetici onayına gönderilir</p>
            <p>• Onay süreci genellikle 1-2 iş günü sürer</p>
            <p>• Belgenizin durumunu departman panelinizden takip edebilirsiniz</p>
            <p>• Reddedilen belgeler için yönetici yorumlarını kontrol edin</p>
        </div>
    </div>
</div>

<script>
function updateFileName(input) {
    const fileInfo = document.getElementById('file-info');
    if (input.files && input.files[0]) {
        const file = input.files[0];
        const size = (file.size / 1024 / 1024).toFixed(2);
        fileInfo.innerHTML = `
            <div class="text-pk-green font-medium">${file.name}</div>
            <div class="text-gray-500">Boyut: ${size} MB</div>
        `;
    } else {
        fileInfo.innerHTML = 'veya dosyayı buraya sürükleyin';
    }
}

// Drag and drop functionality
const dropZone = document.querySelector('.border-dashed');
const fileInput = document.getElementById('file');

dropZone.addEventListener('dragover', (e) => {
    e.preventDefault();
    dropZone.classList.add('border-pk-green', 'bg-green-50');
});

dropZone.addEventListener('dragleave', (e) => {
    e.preventDefault();
    dropZone.classList.remove('border-pk-green', 'bg-green-50');
});

dropZone.addEventListener('drop', (e) => {
    e.preventDefault();
    dropZone.classList.remove('border-pk-green', 'bg-green-50');
    
    const files = e.dataTransfer.files;
    if (files.length > 0) {
        fileInput.files = files;
        updateFileName(fileInput);
    }
});
</script>
{% endblock %}
